{
  "openapi": "3.0.0",
  "info": {
    "title": "Instantly Service",
    "description": "Cold email outreach service via Instantly.ai API. Manages campaigns, leads, accounts, analytics, and webhook events.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3011"
    }
  ],
  "components": {
    "schemas": {
      "RootResponse": {
        "type": "object",
        "properties": {
          "service": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        },
        "required": [
          "service",
          "version"
        ]
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "service": {
            "type": "string"
          }
        },
        "required": [
          "status",
          "service"
        ]
      },
      "WebhookConfigResponse": {
        "type": "object",
        "properties": {
          "webhookUrl": {
            "type": "string",
            "format": "uri"
          }
        },
        "required": [
          "webhookUrl"
        ]
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          }
        },
        "required": [
          "error"
        ]
      },
      "WebhookResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "eventType": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "eventType"
        ]
      },
      "WebhookPayload": {
        "type": "object",
        "properties": {
          "event_type": {
            "type": "string"
          },
          "campaign_id": {
            "type": "string"
          },
          "lead_email": {
            "type": "string"
          },
          "email_account": {
            "type": "string"
          },
          "timestamp": {
            "type": "string"
          },
          "step": {
            "type": "integer"
          },
          "variant": {
            "type": "integer"
          }
        },
        "required": [
          "event_type"
        ]
      },
      "SendResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "campaignId": {
            "type": "string"
          },
          "leadId": {
            "type": "string",
            "nullable": true
          },
          "added": {
            "type": "number"
          },
          "stepRuns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "step": {
                  "type": "integer",
                  "minimum": 1
                },
                "runId": {
                  "type": "string"
                }
              },
              "required": [
                "step",
                "runId"
              ]
            }
          }
        },
        "required": [
          "success",
          "campaignId",
          "added"
        ]
      },
      "SendRequest": {
        "type": "object",
        "properties": {
          "orgId": {
            "type": "string"
          },
          "brandId": {
            "type": "string"
          },
          "appId": {
            "type": "string"
          },
          "runId": {
            "type": "string"
          },
          "campaignId": {
            "type": "string"
          },
          "leadId": {
            "type": "string",
            "description": "External lead ID from lead-service"
          },
          "to": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "company": {
            "type": "string"
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "subject": {
            "type": "string",
            "description": "Shared subject for all steps in the sequence"
          },
          "sequence": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "step": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "1-based ordinal step number"
                },
                "bodyHtml": {
                  "type": "string",
                  "description": "HTML body for this step"
                },
                "daysSinceLastStep": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Delay in days since the previous step (0 = immediate)"
                }
              },
              "required": [
                "step",
                "bodyHtml",
                "daysSinceLastStep"
              ]
            },
            "minItems": 1,
            "description": "Ordered email steps â€” at least one required"
          }
        },
        "required": [
          "brandId",
          "appId",
          "runId",
          "campaignId",
          "to",
          "subject",
          "sequence"
        ]
      },
      "CreateCampaignResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "campaign": {
            "$ref": "#/components/schemas/CampaignSummary"
          }
        },
        "required": [
          "success",
          "campaign"
        ]
      },
      "CampaignSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "instantlyCampaignId": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "status": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "instantlyCampaignId",
          "name",
          "status"
        ]
      },
      "CreateCampaignRequest": {
        "type": "object",
        "properties": {
          "orgId": {
            "type": "string"
          },
          "clerkOrgId": {
            "type": "string"
          },
          "brandId": {
            "type": "string"
          },
          "appId": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "runId": {
            "type": "string"
          },
          "accountIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            }
          }
        },
        "required": [
          "orgId",
          "clerkOrgId",
          "brandId",
          "appId",
          "name"
        ]
      },
      "UpdateStatusRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "active",
              "paused",
              "completed"
            ]
          }
        },
        "required": [
          "status"
        ]
      },
      "CheckStatusResponse": {
        "type": "object",
        "properties": {
          "checked": {
            "type": "number",
            "description": "Number of active campaigns checked"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instantlyCampaignId": {
                  "type": "string"
                },
                "campaignId": {
                  "type": "string",
                  "nullable": true
                },
                "leadEmail": {
                  "type": "string",
                  "nullable": true
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "instantlyCampaignId",
                "campaignId",
                "leadEmail",
                "reason"
              ]
            },
            "description": "Campaigns that entered error state"
          }
        },
        "required": [
          "checked",
          "errors"
        ]
      },
      "AddLeadsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "added": {
            "type": "number"
          },
          "total": {
            "type": "number"
          }
        },
        "required": [
          "success",
          "added",
          "total"
        ]
      },
      "AddLeadsRequest": {
        "type": "object",
        "properties": {
          "orgId": {
            "type": "string"
          },
          "runId": {
            "type": "string"
          },
          "leads": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string"
                },
                "firstName": {
                  "type": "string"
                },
                "lastName": {
                  "type": "string"
                },
                "companyName": {
                  "type": "string"
                },
                "customVariables": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "email"
              ]
            }
          }
        },
        "required": [
          "orgId",
          "leads"
        ]
      },
      "DeleteLeadsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "deleted": {
            "type": "number"
          }
        },
        "required": [
          "success",
          "deleted"
        ]
      },
      "DeleteLeadsRequest": {
        "type": "object",
        "properties": {
          "emails": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "emails"
        ]
      },
      "StatsResponse": {
        "type": "object",
        "properties": {
          "stats": {
            "type": "object",
            "properties": {
              "emailsSent": {
                "type": "number",
                "description": "Total email_sent events"
              },
              "emailsDelivered": {
                "type": "number",
                "description": "emailsSent minus emailsBounced"
              },
              "emailsOpened": {
                "type": "number",
                "description": "Unique recipients who opened (COUNT DISTINCT lead_email with email_opened events)"
              },
              "emailsClicked": {
                "type": "number",
                "description": "Total link click events"
              },
              "emailsReplied": {
                "type": "number",
                "description": "Total reply_received events"
              },
              "emailsBounced": {
                "type": "number",
                "description": "Total email_bounced events"
              },
              "repliesAutoReply": {
                "type": "number",
                "description": "Total auto_reply_received events"
              },
              "repliesNotInterested": {
                "type": "number",
                "description": "Total lead_not_interested events"
              },
              "repliesOutOfOffice": {
                "type": "number",
                "description": "Total lead_out_of_office events"
              },
              "repliesUnsubscribe": {
                "type": "number",
                "description": "Total lead_unsubscribed events"
              }
            },
            "required": [
              "emailsSent",
              "emailsDelivered",
              "emailsOpened",
              "emailsClicked",
              "emailsReplied",
              "emailsBounced",
              "repliesAutoReply",
              "repliesNotInterested",
              "repliesOutOfOffice",
              "repliesUnsubscribe"
            ]
          },
          "recipients": {
            "type": "number",
            "description": "Unique recipients (COUNT DISTINCT lead_email with email_sent events)"
          },
          "stepStats": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "step": {
                  "type": "number",
                  "description": "Step number (1-based)"
                },
                "emailsSent": {
                  "type": "number"
                },
                "emailsOpened": {
                  "type": "number"
                },
                "emailsReplied": {
                  "type": "number"
                },
                "emailsBounced": {
                  "type": "number"
                }
              },
              "required": [
                "step",
                "emailsSent",
                "emailsOpened",
                "emailsReplied",
                "emailsBounced"
              ]
            },
            "description": "Per-step breakdown (only present when step data exists)"
          }
        },
        "required": [
          "stats",
          "recipients"
        ]
      },
      "StatsRequest": {
        "type": "object",
        "properties": {
          "runIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "clerkOrgId": {
            "type": "string"
          },
          "brandId": {
            "type": "string"
          },
          "appId": {
            "type": "string"
          },
          "campaignId": {
            "type": "string"
          }
        }
      },
      "SyncResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "synced": {
            "type": "number"
          }
        },
        "required": [
          "success",
          "synced"
        ]
      },
      "WarmupResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "email": {
            "type": "string"
          },
          "warmupEnabled": {
            "type": "boolean"
          }
        },
        "required": [
          "success",
          "email",
          "warmupEnabled"
        ]
      },
      "WarmupRequest": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean"
          }
        },
        "required": [
          "enabled"
        ]
      },
      "StatusResponse": {
        "type": "object",
        "properties": {
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "leadId": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "campaign": {
                  "type": "object",
                  "nullable": true,
                  "properties": {
                    "lead": {
                      "type": "object",
                      "properties": {
                        "contacted": {
                          "type": "boolean"
                        },
                        "delivered": {
                          "type": "boolean"
                        },
                        "replied": {
                          "type": "boolean"
                        },
                        "lastDeliveredAt": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "contacted",
                        "delivered",
                        "replied",
                        "lastDeliveredAt"
                      ]
                    },
                    "email": {
                      "type": "object",
                      "properties": {
                        "contacted": {
                          "type": "boolean"
                        },
                        "delivered": {
                          "type": "boolean"
                        },
                        "bounced": {
                          "type": "boolean"
                        },
                        "unsubscribed": {
                          "type": "boolean"
                        },
                        "lastDeliveredAt": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "contacted",
                        "delivered",
                        "bounced",
                        "unsubscribed",
                        "lastDeliveredAt"
                      ]
                    }
                  },
                  "required": [
                    "lead",
                    "email"
                  ]
                },
                "brand": {
                  "type": "object",
                  "properties": {
                    "lead": {
                      "type": "object",
                      "properties": {
                        "contacted": {
                          "type": "boolean"
                        },
                        "delivered": {
                          "type": "boolean"
                        },
                        "replied": {
                          "type": "boolean"
                        },
                        "lastDeliveredAt": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "contacted",
                        "delivered",
                        "replied",
                        "lastDeliveredAt"
                      ]
                    },
                    "email": {
                      "type": "object",
                      "properties": {
                        "contacted": {
                          "type": "boolean"
                        },
                        "delivered": {
                          "type": "boolean"
                        },
                        "bounced": {
                          "type": "boolean"
                        },
                        "unsubscribed": {
                          "type": "boolean"
                        },
                        "lastDeliveredAt": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "contacted",
                        "delivered",
                        "bounced",
                        "unsubscribed",
                        "lastDeliveredAt"
                      ]
                    }
                  },
                  "required": [
                    "lead",
                    "email"
                  ]
                },
                "global": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "object",
                      "properties": {
                        "bounced": {
                          "type": "boolean"
                        },
                        "unsubscribed": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "bounced",
                        "unsubscribed"
                      ]
                    }
                  },
                  "required": [
                    "email"
                  ]
                }
              },
              "required": [
                "leadId",
                "email",
                "campaign",
                "brand",
                "global"
              ]
            }
          }
        },
        "required": [
          "results"
        ]
      },
      "StatusRequest": {
        "type": "object",
        "properties": {
          "brandId": {
            "type": "string",
            "description": "Brand ID to scope brand-level results"
          },
          "campaignId": {
            "type": "string",
            "description": "Campaign ID to scope campaign-level results (omit for global-only checks)"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "leadId": {
                  "type": "string",
                  "description": "Lead-service lead ID (human)"
                },
                "email": {
                  "type": "string",
                  "description": "Email address"
                }
              },
              "required": [
                "leadId",
                "email"
              ]
            },
            "minItems": 1,
            "description": "Lead/email pairs to check"
          }
        },
        "required": [
          "brandId",
          "items"
        ]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Service info",
        "responses": {
          "200": {
            "description": "Service info",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RootResponse"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/webhooks/instantly/config": {
      "get": {
        "summary": "Get webhook URL for BYOK configuration",
        "description": "Returns the webhook URL that BYOK customers should paste into their Instantly dashboard webhook settings.",
        "responses": {
          "200": {
            "description": "Webhook configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookConfigResponse"
                }
              }
            }
          },
          "500": {
            "description": "INSTANTLY_SERVICE_URL not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/webhooks/instantly": {
      "post": {
        "summary": "Receive Instantly webhook events",
        "description": "Verification: the campaign_id in the payload must exist in the database. Each campaign UUID is unguessable and stored with its org on creation.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebhookPayload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing event_type or campaign_id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unknown campaign_id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/send": {
      "post": {
        "summary": "Send email via Instantly campaign",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email sent",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SendResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Failed to send",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/campaigns": {
      "post": {
        "summary": "Create a campaign",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampaignRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Campaign created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateCampaignResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Failed to create campaign",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/campaigns/{campaignId}": {
      "get": {
        "summary": "Get a campaign",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "campaignId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Campaign found"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Campaign not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/campaigns/by-org/{orgId}": {
      "get": {
        "summary": "List campaigns by organization",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Campaigns list"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/campaigns/{campaignId}/status": {
      "patch": {
        "summary": "Update campaign status",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "campaignId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          },
          "400": {
            "description": "Invalid status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Campaign not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/campaigns/check-status": {
      "post": {
        "summary": "Poll active campaigns for errors",
        "description": "Checks all active campaigns against the Instantly API to detect error states. For each errored campaign: updates DB status, cancels provisioned costs, fails the run, and sends an admin notification.",
        "responses": {
          "200": {
            "description": "Status check complete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/campaigns/{campaignId}/leads": {
      "post": {
        "summary": "Add leads to a campaign",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "campaignId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddLeadsRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Leads added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddLeadsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Campaign not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Failed to add leads",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List campaign leads",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "skip",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Leads list"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Campaign not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete leads from a campaign",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "campaignId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteLeadsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Leads deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteLeadsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing emails",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Campaign not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/stats": {
      "post": {
        "summary": "Get aggregated stats by filters",
        "description": "Aggregates stats from webhook events across campaigns matching the provided filters. At least one filter is required. Response shape aligned with Postmark stats contract.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StatsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Aggregated campaign stats",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatsResponse"
                }
              }
            }
          },
          "400": {
            "description": "No filter provided",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/accounts": {
      "get": {
        "summary": "List email accounts",
        "responses": {
          "200": {
            "description": "Accounts list"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/accounts/sync": {
      "post": {
        "summary": "Sync accounts from Instantly",
        "responses": {
          "200": {
            "description": "Sync complete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SyncResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/accounts/{email}/warmup": {
      "post": {
        "summary": "Enable or disable warmup for an account",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "email",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarmupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Warmup setting updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarmupResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/accounts/warmup-analytics": {
      "get": {
        "summary": "Get warmup analytics",
        "responses": {
          "200": {
            "description": "Warmup analytics"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/status": {
      "post": {
        "summary": "Batch delivery status check for leads/emails",
        "description": "Returns campaign-scoped, brand-scoped, and global delivery status for each lead/email pair. Campaign filters by campaignId (null if omitted); brand filters by brandId; global aggregates across everything.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Delivery status results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  }
}